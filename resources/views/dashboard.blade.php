@extends('layouts.user_type.auth')


@section('content')
    <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4 ">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool in Dolly
                                    Supply Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4 ">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool in Input
                                    Supply
                                    Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4 ">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool in
                                    Disassembly Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4 ">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool in Reg.
                                    Auto Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool in
                                    Reg. Manual Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of Tool
                                    in Pre Assy Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number of
                                    Tool in MC.Nt Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">Number
                                    of Tool in MC.Zol Pos
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4 ">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">
                                    Number of Tool in MC.Zol Spe
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-clipboard text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">
                                    Number of Tool
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-wrench text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">
                                    Number of Holder
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-toolbox text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-capitalize font-weight-bold text-xs">
                                    Number of User
                                </p>
                                <h5 class="font-weight-bolder mb-0">
                                    0
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                <i class="fa fa-address-card text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4 mb-6">
        <div class="col-lg-6 mb-4">
            <div class="card">
                <canvas id="myChart" width="400" height="200"></canvas>
            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="card">
                <canvas id="myChart2"></canvas>
            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="card">
                <canvas id="myChart3"></canvas>
            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="card">
                <canvas id="myChart4"></canvas>
            </div>
        </div>
        <div class="col-lg-6 mb-4">
            <div class="card">
                <canvas id="myChart5"></canvas>
            </div>
        </div>
    </div>
@endsection

@push('dashboard')
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
    <script>
        var months = <?php echo json_encode($months, JSON_NUMERIC_CHECK); ?>;
        var shift1 = <?php echo json_encode($shift1, JSON_NUMERIC_CHECK); ?>;
        var shift2 = <?php echo json_encode($shift2, JSON_NUMERIC_CHECK); ?>;

        var barChartData = {
            labels: months,
            datasets: [{
                label: 'Shift 1',
                backgroundColor: "pink",
                data: shift1
            }, {
                label: 'Shift 2',
                backgroundColor: "blue",
                data: shift2
            }]
        };

        //     window.onload = function() {
        //         var ctx = document.getElementById("myChart").getContext("2d");
        //         window.myBar = new Chart(ctx, {
        //             type: 'bar',
        //             data: barChartData,
        //             options: {
        //                 elements: {
        //                     rectangle: {
        //                         borderWidth: 2,
        //                         borderColor: '#c1c1c1',
        //                         borderSkipped: 'bottom'
        //                     }
        //                 },
        //                 responsive: true,
        //                 title: {
        //                     display: true,
        //                     text: 'Regrinding Auto'
        //                 },
        //                 scales: {
        //                     x: {
        //                         stacked: true
        //                     },
        //                     y: {
        //                         stacked: true
        //                     }
        //                 }
        //             }
        //         });
        //     };
        // 

        window.onload = function() {
            var ctx = document.getElementById('myChart').getContext('2d');
            window.myBar = new Chart(ctx, {
                type: 'bar',
                data: barChartData,
                options: {
                    title: {
                        display: true,
                        text: 'Regrinding Auto'
                    },
                    legend: {
                        display: false
                    },
                    tooltips: {
                        enabled: true,
                        custom: function(tooltipModel) {
                            // Custom tooltip function (if needed)
                        }
                    },
                    animation: {
                        duration: 1000,
                        currentStep: 1,
                        onComplete: function() {
                            var chartInstance = this.chart,
                                ctx = chartInstance.ctx;
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'bottom';
                            var stackGroup = [];
                            var stackIndex = [];
                            for (index = 0; index < this.data.datasets.length; index++) {
                                var stackName = this.data.datasets[index].label;
                                var stack = {
                                    Name: stackName,
                                    stackIndex: index
                                };
                                var result = stackGroup.filter(obj => {
                                    return obj.Name === stackName;
                                });
                                if (result.length > 0) {
                                    var sliceCount = stackGroup.findIndex(x => x.Name == stackName);
                                    stackGroup.splice(sliceCount, true);
                                    stackIndex.splice(sliceCount, true);
                                    stackGroup.push(stack);
                                    stackIndex.push(stack.stackIndex);
                                } else {
                                    stackGroup.push(stack);
                                    stackIndex.push(stack.stackIndex);
                                }
                            }
                            this.data.datasets.forEach(function(dataset, i) {
                                var meta = chartInstance.controller.getDatasetMeta(i);
                                meta.data.forEach(function(bar, index) {
                                    var data = dataset.data[index];
                                    var result = stackGroup.filter(obj => {
                                        return obj.stackIndex === i;
                                    });
                                    if (result.length > 0) {
                                        if (result[0].Name == 'Shift 1') {
                                            ctx.fillText('Completed', bar._model.x, bar
                                                ._model.y - 5);
                                        }
                                        if (result[0].Name == 'Shift 2') {
                                            var str = 'Not<br />Completed';
                                            var html = $.parseHTML(str);
                                            ctx.fillText('Not Completed', bar._model.x, bar
                                                ._model.y - 5);
                                        }
                                    }
                                });
                            });
                        }
                    },
                    responsive: true,
                    scales: {
                        xAxes: [{
                            stacked: true
                        }],
                        yAxes: [{
                            stacked: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Shift Count'
                            }
                        }]
                    }
                }
            });
        };

        document.getElementById('myChart').addEventListener('click', function() {
            barChartData.datasets.forEach(function(dataset) {
                dataset.data = dataset.data.map(function() {
                    return randomScalingFactor();
                });
            });
            window.myBar.update();
        });
    </script>
@endpush
